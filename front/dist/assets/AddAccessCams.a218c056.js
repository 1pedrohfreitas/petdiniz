var Le=Object.defineProperty,Te=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var ie=(e,o,t)=>o in e?Le(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,oe=(e,o)=>{for(var t in o||(o={}))Me.call(o,t)&&ie(e,t,o[t]);if(le)for(var t of le(o))De.call(o,t)&&ie(e,t,o[t]);return e},te=(e,o)=>Te(e,ze(o));import{_ as u,r as l,j as w,a as n,u as Ae,b as ce}from"./index.b0e91862.js";import{B as _e}from"./Box.04ee3f33.js";import{g as N,a as U,s as $,B as Oe,_ as D,c as G,b as se,d as L,e as V,r as Ce,f as be,u as Q,h as Ne}from"./ButtonBase.4fe4f374.js";import{u as re,f as xe}from"./Select.c1216a27.js";import{T as de}from"./Typography.1a7f085c.js";import{u as ge,c as Ue,a as Ge}from"./Modal.3a8b8f7e.js";import{M as Ve}from"./ModalQrCode.52fa3640.js";import{F as qe,a as We,T as M}from"./TextField.5f6e7eb3.js";import{S as He}from"./SnackBarCustom.0cc24725.js";/* empty css              */import{A as je}from"./Autocomplete.c23c8fec.js";import"./Menu.df74857a.js";import"./Grow.67318f79.js";import"./ExitToAppSharp.02498b4d.js";import"./jsx-runtime_commonjs-proxy.683ef609.js";import"./Close.fd9a01c4.js";import"./Popper.9c8e22b1.js";function Qe(e){return N("PrivateSwitchBase",e)}U("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ze=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Je=e=>{const{classes:o,checked:t,disabled:a,edge:r}=e,c={root:["root",t&&"checked",a&&"disabled",r&&`edge${L(r)}`],input:["input"]};return G(c,Qe,o)},Ke=$(Oe)(({ownerState:e})=>u({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Xe=$("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ye=l.exports.forwardRef(function(o,t){const{autoFocus:a,checked:r,checkedIcon:c,className:m,defaultChecked:d,disabled:b,disableFocusRipple:p=!1,edge:C=!1,icon:P,id:f,inputProps:x,inputRef:g,name:v,onBlur:i,onChange:k,onFocus:y,readOnly:S,required:Z,tabIndex:J,type:T,value:F}=o,A=D(o,Ze),[z,K]=ge({controlled:r,default:Boolean(d),name:"SwitchBase",state:"checked"}),R=re(),q=I=>{y&&y(I),R&&R.onFocus&&R.onFocus(I)},X=I=>{i&&i(I),R&&R.onBlur&&R.onBlur(I)},Y=I=>{if(I.nativeEvent.defaultPrevented)return;const W=I.target.checked;K(W),k&&k(I,W)};let E=b;R&&typeof E=="undefined"&&(E=R.disabled);const ee=T==="checkbox"||T==="radio",_=u({},o,{checked:z,disabled:E,disableFocusRipple:p,edge:C}),O=Je(_);return w(Ke,u({component:"span",className:se(O.root,m),centerRipple:!0,focusRipple:!p,disabled:E,tabIndex:null,role:void 0,onFocus:q,onBlur:X,ownerState:_,ref:t},A,{children:[n(Xe,u({autoFocus:a,checked:r,defaultChecked:d,className:O.input,disabled:E,id:ee&&f,name:v,onChange:Y,readOnly:S,ref:g,required:Z,ownerState:_,tabIndex:J,type:T},T==="checkbox"&&F===void 0?{}:{value:F},x)),z?c:P]}))});var ke=Ye,eo=V(n("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),oo=V(n("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),to=V(n("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ao(e){return N("MuiCheckbox",e)}const no=U("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);var ae=no;const so=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],ro=e=>{const{classes:o,indeterminate:t,color:a}=e,r={root:["root",t&&"indeterminate",`color${L(a)}`]},c=G(r,ao,o);return u({},o,c)},lo=$(ke,{shouldForwardProp:e=>Ce(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.indeterminate&&o.indeterminate,t.color!=="default"&&o[`color${L(t.color)}`]]}})(({theme:e,ownerState:o})=>u({color:e.palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:be(o.color==="default"?e.palette.action.active:e.palette[o.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${ae.checked}, &.${ae.indeterminate}`]:{color:e.palette[o.color].main},[`&.${ae.disabled}`]:{color:e.palette.action.disabled}})),io=n(oo,{}),co=n(eo,{}),uo=n(to,{}),po=l.exports.forwardRef(function(o,t){var a,r;const c=Q({props:o,name:"MuiCheckbox"}),{checkedIcon:m=io,color:d="primary",icon:b=co,indeterminate:p=!1,indeterminateIcon:C=uo,inputProps:P,size:f="medium"}=c,x=D(c,so),g=p?C:b,v=p?C:m,i=u({},c,{color:d,indeterminate:p,size:f}),k=ro(i);return n(lo,u({type:"checkbox",inputProps:u({"data-indeterminate":p},P),icon:l.exports.cloneElement(g,{fontSize:(a=g.props.fontSize)!=null?a:f}),checkedIcon:l.exports.cloneElement(v,{fontSize:(r=v.props.fontSize)!=null?r:f}),ownerState:i,ref:t},x,{classes:k}))});var ue=po;function mo(e){return N("MuiFormControlLabel",e)}const fo=U("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]);var j=fo;const ho=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],Co=e=>{const{classes:o,disabled:t,labelPlacement:a,error:r}=e,c={root:["root",t&&"disabled",`labelPlacement${L(a)}`,r&&"error"],label:["label",t&&"disabled"]};return G(c,mo,o)},bo=$("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[{[`& .${j.label}`]:o.label},o.root,o[`labelPlacement${L(t.labelPlacement)}`]]}})(({theme:e,ownerState:o})=>u({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${j.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${j.label}`]:{[`&.${j.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),xo=l.exports.forwardRef(function(o,t){const a=Q({props:o,name:"MuiFormControlLabel"}),{className:r,componentsProps:c={},control:m,disabled:d,disableTypography:b,label:p,labelPlacement:C="end"}=a,P=D(a,ho),f=re();let x=d;typeof x=="undefined"&&typeof m.props.disabled!="undefined"&&(x=m.props.disabled),typeof x=="undefined"&&f&&(x=f.disabled);const g={disabled:x};["checked","name","onChange","value","inputRef"].forEach(S=>{typeof m.props[S]=="undefined"&&typeof a[S]!="undefined"&&(g[S]=a[S])});const v=xe({props:a,muiFormControl:f,states:["error"]}),i=u({},a,{disabled:x,labelPlacement:C,error:v.error}),k=Co(i);let y=p;return y!=null&&y.type!==de&&!b&&(y=n(de,u({component:"span",className:k.label},c.typography,{children:y}))),w(bo,u({className:se(k.root,r),ownerState:i,ref:t},P,{children:[l.exports.cloneElement(m,g),y]}))});var ne=xo;function go(e){return N("MuiFormGroup",e)}U("MuiFormGroup",["root","row","error"]);const ko=["className","row"],vo=e=>{const{classes:o,row:t,error:a}=e;return G({root:["root",t&&"row",a&&"error"]},go,o)},yo=$("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.row&&o.row]}})(({ownerState:e})=>u({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),So=l.exports.forwardRef(function(o,t){const a=Q({props:o,name:"MuiFormGroup"}),{className:r,row:c=!1}=a,m=D(a,ko),d=re(),b=xe({props:a,muiFormControl:d,states:["error"]}),p=u({},a,{row:c,error:b.error}),C=vo(p);return n(yo,u({className:se(C.root,r),ownerState:p,ref:t},m))});var Ro=So,Po=V(n("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Io=V(n("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");const Bo=$("span")({position:"relative",display:"flex"}),wo=$(Po)({transform:"scale(1)"}),$o=$(Io)(({theme:e,ownerState:o})=>u({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},o.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function ve(e){const{checked:o=!1,classes:t={},fontSize:a}=e,r=u({},e,{checked:o});return w(Bo,{className:t.root,ownerState:r,children:[n(wo,{fontSize:a,className:t.background,ownerState:r}),n($o,{fontSize:a,className:t.dot,ownerState:r})]})}const Fo=l.exports.createContext(void 0);var ye=Fo;function Eo(){return l.exports.useContext(ye)}function Lo(e){return N("MuiRadio",e)}const To=U("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);var pe=To;const zo=["checked","checkedIcon","color","icon","name","onChange","size"],Mo=e=>{const{classes:o,color:t}=e,a={root:["root",`color${L(t)}`]};return u({},o,G(a,Lo,o))},Do=$(ke,{shouldForwardProp:e=>Ce(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,o[`color${L(t.color)}`]]}})(({theme:e,ownerState:o})=>u({color:e.palette.text.secondary,"&:hover":{backgroundColor:be(o.color==="default"?e.palette.action.active:e.palette[o.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${pe.checked}`]:{color:e.palette[o.color].main}},{[`&.${pe.disabled}`]:{color:e.palette.action.disabled}}));function Ao(e,o){return typeof o=="object"&&o!==null?e===o:String(e)===String(o)}const me=n(ve,{checked:!0}),fe=n(ve,{}),_o=l.exports.forwardRef(function(o,t){var a,r;const c=Q({props:o,name:"MuiRadio"}),{checked:m,checkedIcon:d=me,color:b="primary",icon:p=fe,name:C,onChange:P,size:f="medium"}=c,x=D(c,zo),g=u({},c,{color:b,size:f}),v=Mo(g),i=Eo();let k=m;const y=Ue(P,i&&i.onChange);let S=C;return i&&(typeof k=="undefined"&&(k=Ao(i.value,c.value)),typeof S=="undefined"&&(S=i.name)),n(Do,u({type:"radio",icon:l.exports.cloneElement(p,{fontSize:(a=fe.props.fontSize)!=null?a:f}),checkedIcon:l.exports.cloneElement(d,{fontSize:(r=me.props.fontSize)!=null?r:f}),ownerState:g,classes:v,name:S,checked:k,onChange:y,ref:t},x))});var Oo=_o;const No=["actions","children","defaultValue","name","onChange","value"],Uo=l.exports.forwardRef(function(o,t){const{actions:a,children:r,defaultValue:c,name:m,onChange:d,value:b}=o,p=D(o,No),C=l.exports.useRef(null),[P,f]=ge({controlled:b,default:c,name:"RadioGroup"});l.exports.useImperativeHandle(a,()=>({focus:()=>{let i=C.current.querySelector("input:not(:disabled):checked");i||(i=C.current.querySelector("input:not(:disabled)")),i&&i.focus()}}),[]);const x=Ne(t,C),g=i=>{f(i.target.value),d&&d(i,i.target.value)},v=Ge(m);return n(ye.Provider,{value:{name:v,onChange:g,value:P},children:n(Ro,u({role:"radiogroup",ref:x},p,{children:r}))})});var Go=Uo;function Vo(e){const o=e.itens,[t,a]=l.exports.useState([]),r=d=>{const b=t.indexOf(d);a(b===-1?[...t,d]:t.filter(p=>p!==d))};l.exports.useEffect(()=>{e.cheboxArrayValue(t)},[t]);const c=()=>{t.length!=o.length?a(o.map(d=>d.id)):a([])},m=n(_e,{sx:{display:"flex",flexDirection:"column",ml:3},children:o.map(d=>n(ne,{label:d.label,control:n(ue,{checked:t.includes(d.id),onClick:()=>r(d.id)})},d.id))});return w("div",{children:[n(ne,{label:e.mainTitle,control:n(ue,{checked:t.length==o.length,indeterminate:t.length!=0&&t.length!=o.length,onClick:c})}),m]})}function he(e){const o=e.title,t=e.itens,a=r=>{e.handleChangeRadio(r)};return w(qe,{children:[n(We,{id:"demo-radio-buttons-group-label",children:o}),n(Go,{defaultValue:t[0].value,name:"radio-buttons-group",onChange:a,style:{display:"flex",flexDirection:"row"},children:t.map(r=>n(ne,{value:r.value,control:n(Oo,{}),label:r.label},r.value))})]})}function it(e){const t=Ae(s=>s.user).user,a=new Date,[r,c]=l.exports.useState(new Date(a.getTime()-a.getTimezoneOffset()*6e4).toISOString().substring(0,19)),[m,d]=l.exports.useState(new Date(a.getTime()+24*36e5-a.getTimezoneOffset()*6e4).toISOString().substring(0,19)),[b,p]=l.exports.useState([]),[C,P]=l.exports.useState(20),[f,x]=l.exports.useState(""),[g,v]=l.exports.useState(""),[i,k]=l.exports.useState(1),[y,S]=l.exports.useState(""),[Z,J]=l.exports.useState(""),[T,F]=l.exports.useState(!1);function A(s,h){return new Promise((B,H)=>{S(s),J(h),F(!0),B("Dados Atualizados")})}const[z,K]=l.exports.useState(1),[R,q]=l.exports.useState(""),[X,Y]=l.exports.useState([]),[E,ee]=l.exports.useState([]),[_,O]=l.exports.useState(!1),I=()=>{ce(()=>import("./Api.5a83ade6.js"),[]).then(s=>{s.getRequest("users/",localStorage.getItem("petdiniz-token")).then(h=>{h.data.data!=null&&Y(h.data.data.map(B=>({name:B.fullname,id:B.id})))}),s.getRequest("cams/",localStorage.getItem("petdiniz-token")).then(h=>{h.data.data!=null&&ee(h.data.data.map(B=>({id:B.id,label:B.alias})))})})};l.exports.useEffect(()=>{I()},[]);const W=()=>{let s=[],h={alias:g,createbyuserid:t.id,startpermissiondate:`${r}.000000-03:00`,camid:b};b.length==0&&s.push("Voc\xEA prescisa selecionar pelo menos uma c\xE2mera para liberar o acesso"),i==1&&(h.stoppermissiondate=`${m}.000000-03:00`),i==2&&(h.durationpermitions=parseInt(C),h.durationpermitions==0&&s.push("Para este tipo de delimita\xE7\xE3o de tempo, o valor deve ser diferente de 0")),z==1?R!=null&&R!=""?h.userid=R:s.push("Para este tipo de licen\xE7a, selecione um usuario"):h.userid=0,s.length==0?ce(()=>import("./Api.5a83ade6.js"),[]).then(B=>{B.postRequest("cams/camaccesspermission",h,localStorage.getItem("petdiniz-token")).then(H=>{const Ee=H.data;x(`${window.location.origin}/onlyviewcams/${Ee}`),A("success","Link gerado com sucesso!").then(()=>{}).finally(()=>{setTimeout(()=>{F(!1)},3e3)})}).catch(H=>console.log(H))}):s.forEach(B=>{A("erro",B).then(()=>{}).finally(()=>{setTimeout(()=>{F(!1)},3e3)})})},Se=s=>{navigator.clipboard.writeText(f).then(()=>{A("success","Link copiado com sucesso!").then(()=>{}).finally(()=>{setTimeout(()=>{F(!1)},3e3)})})},Re=s=>{k(s.target.value)},Pe=s=>{K(s.target.value)},Ie=s=>{p(s)},Be=s=>{s!=null?q(s.id):q(null)},we={options:X,getOptionLabel:s=>s.name},$e=(s,h)=>{O(!0)},Fe=()=>{O(!1)};return w("div",{className:"addAccessCams",children:[w("div",{className:"addAccessCamsArea",children:[w("div",{className:"dateTimeArea",children:[n(M,{id:"startdatetime",type:"datetime-local",onChange:s=>c(s.target.value),autoComplete:"off",style:{maxWidth:600},value:r,label:"Inicio da permiss\xE3o:",variant:"outlined"}),n(he,{handleChangeRadio:Re,title:"Delimita\xE7\xE3o de tempo",itens:[{value:1,label:"Data"},{value:2,label:"Dura\xE7\xE3o"}]}),n(M,{id:"fimdatetime",type:"datetime-local",onChange:s=>d(s.target.value),autoComplete:"off",style:{maxWidth:600,display:i==1?"flex":"none"},value:m,label:"Fim da permiss\xE3o:",variant:"outlined"}),n(M,{id:"durationdatetime",type:"number",onChange:s=>P(s.target.value),autoComplete:"off",style:{maxWidth:600,display:i==2?"flex":"none"},value:C,inputProps:{inputMode:"numeric",pattern:"[0-9]*"},label:"Dura\xE7\xE3o: (min)",variant:"outlined"})]}),w("div",{className:"selectTypeArea",children:[n(M,{id:"alias",autoComplete:"off",style:{maxWidth:600},value:g,onChange:s=>v(s.target.value),label:"Nome Refer\xEAncia:",variant:"outlined"}),n(he,{handleChangeRadio:Pe,title:"Tipo de Licen\xE7a",itens:[{value:"1",label:"Usuario"},{value:"2",label:"Acesso Unico"}]}),n(je,te(oe({},we),{id:"userIdPermission",disableCloseOnSelect:!0,style:{maxWidth:600,display:z==1?"flex":"none"},isOptionEqualToValue:(s,h)=>s.id===h.id,onChange:(s,h)=>Be(h),renderInput:s=>n(M,te(oe({},s),{label:"Usuario",variant:"standard"}))})),w("div",{className:"linkAreaText",style:{maxWidth:600,display:z==2?"flex":"none"},children:[n(M,{id:"onlyLink",autoComplete:"off",style:{maxWidth:600},value:f,label:"Link de Libera\xE7\xE3o:",variant:"outlined"}),w("div",{className:"linkAreaTextBtnArea",children:[n("button",{onClick:Se,children:"Copiar!"}),n("button",{onClick:$e,children:"Gerar QrCode"})]})]})]}),n("div",{className:"selectCamsArea",children:n(Vo,{cheboxArrayValue:Ie,mainTitle:"Todas as c\xE2meras",itens:E})})]}),n("div",{children:n("button",{className:"btnSave",onClick:W,children:"Salvar"})}),n(He,{open:T,typeMessage:y,mensage:Z}),n(Ve,{openModalQrCode:_,qrCodeText:f,handleCloseModal:Fe})]})}export{it as default};

var D=Object.defineProperty,A=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(t,i,r)=>i in t?D(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r,R=(t,i)=>{for(var r in i||(i={}))y.call(i,r)&&I(t,r,i[r]);if(E)for(var r of E(i))U.call(i,r)&&I(t,r,i[r]);return t},k=(t,i)=>A(t,_(i));import{h as W,r as d,j as c,a as s,d as H,u as M,b as z}from"./index.b0e91862.js";import{d as Y,a as j}from"./FileOpenTwoTone.ffde31c2.js";import{getRequest as q,deleteRequest as w}from"./Api.5a83ade6.js";import{a as S,f as B}from"./DateUtil.23249470.js";import{P as N}from"./ButtonBase.4fe4f374.js";import{T as $,a as O,b as G,c as v,d as x,e as V,f as J}from"./TableRow.616f147f.js";/* empty css              */import{A as C}from"./Autocomplete.c23c8fec.js";import{T as L}from"./TextField.5f6e7eb3.js";import"./jsx-runtime_commonjs-proxy.683ef609.js";import"./Modal.3a8b8f7e.js";import"./Grow.67318f79.js";import"./Toolbar.a09df885.js";import"./Select.c1216a27.js";import"./Menu.df74857a.js";import"./MenuItem.06d228b4.js";import"./Close.fd9a01c4.js";import"./Popper.9c8e22b1.js";function K(t){const i=W(),r=t.columns,[m,g]=d.exports.useState(10),[u,f]=d.exports.useState(0),[p,h]=d.exports.useState([]),[b,P]=d.exports.useState([]);d.exports.useEffect(()=>{q("cams/camaccesspermission",localStorage.getItem("petdiniz-token")).then(e=>{if(e.data.data!=null){const a=e.data.data.map(o=>(o.startpermissiondate=S(o.startpermissiondate),o.stoppermissiondate=S(o.stoppermissiondate),o.durationpermitions=B(o.durationpermitions),o));h(a),P(a),t.handleRefList(a)}})},[]),d.exports.useEffect(()=>{let e=b;t.idFilter!=null?(console.log(t.idFilter),e=e.filter(a=>a.userid==t.idFilter)):t.refFilter!=null&&(console.log(t.refFilter),e=e.filter(a=>a.alias==t.refFilter)),h(e)},[t.idFilter,t.refFilter]);const F=(e,a)=>{f(a)},T=e=>{w("cams/camaccesspermission/",e.token,localStorage.getItem("petdiniz-token")).then(()=>{const a=p.filter(o=>o.token!=e.token);h(a)})},n=e=>{i(`/home/${localStorage.getItem("petdiniz-token")}/detailsaccesscams/${e.token}`)},l=e=>{g(+e.target.value),f(0)};return c(N,{sx:{width:"100%",overflow:"hidden"},children:[s($,{sx:{maxHeight:440},children:c(O,{stickyHeader:!0,"aria-label":"sticky table",children:[s(G,{children:c(v,{children:[r.map(e=>s(x,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)),s(x,{})]})}),s(V,{children:p.slice(u*m,u*m+m).map(e=>s(H.Fragment,{children:c(v,{hover:!0,role:"checkbox",tabIndex:-1,children:[r.map(a=>{const o=e[a.id];return s(x,{align:a.align,children:a.format&&typeof o=="number"?a.format(o):o},a.id)}),c(x,{children:[s("a",{onClick:()=>T(e),children:s(Y,{})}),s("a",{onClick:()=>n(e),children:s(j,{})})]})]},e.id)},e.token))})]})}),s(J,{rowsPerPageOptions:[10,25,100],component:"div",count:p.length,rowsPerPage:m,page:u,onPageChange:F,onRowsPerPageChange:l})]})}function ge(t){const r=M(n=>n.user).user,[m,g]=d.exports.useState(null),[u,f]=d.exports.useState(null),[p,h]=d.exports.useState([]),[b,P]=d.exports.useState([]),F=n=>{const l=n.map(e=>({id:e.alias,label:e.alias}));P(l)};return d.exports.useEffect(()=>{z(()=>import("./Api.5a83ade6.js"),[]).then(n=>{n.getRequest("users/",localStorage.getItem("petdiniz-token")).then(l=>{const e=l.data.data.map(a=>({id:a.id,label:a.fullname}));e.unshift({id:0,label:"Token Unico"}),h(e)})})},[]),c("div",{className:"tableListItemArea",children:[c("div",{className:"filter",children:[s(C,{disablePortal:!0,id:"filterReferencia",options:b,onChange:(n,l)=>{l!=null?f(l.id):f(null)},sx:{width:"100%"},renderInput:n=>s(L,k(R({},n),{label:"Buscar por refer\xEAncia"}))}),s(C,{disablePortal:!0,id:"filterUser",options:p,onChange:(n,l)=>{l!=null?g(l.id):g(null)},sx:{width:"100%"},renderInput:n=>s(L,k(R({},n),{label:"Buscar usuario"}))})]}),s(K,{userData:r,idFilter:m,refFilter:u,columns:[{id:"alias",label:"Refer\xEAncia:",minWidth:50},{id:"username",label:"Usuario:",width:150},{id:"startpermissiondate",label:"Inicio da permiss\xE3o:",minWidth:200},{id:"stoppermissiondate",label:"Fim da permiss\xE3o:",minWidth:200},{id:"durationpermitions",label:"Dura\xE7\xE3o da permiss\xE3o:",minWidth:200}],handleRefList:F})]})}export{ge as default};

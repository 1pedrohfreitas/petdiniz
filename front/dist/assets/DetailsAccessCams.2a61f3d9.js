import{r as t,j as n,a as e,d as Y,g as $,b as q}from"./index.b0e91862.js";import{M as F}from"./ModalQrCode.52fa3640.js";import{S as Q}from"./SnackBarCustom.0cc24725.js";import{P as U}from"./ButtonBase.4fe4f374.js";import{T as G,a as V,b as J,c as k,d as C,e as K,f as X}from"./TableRow.616f147f.js";import{f as Z,a as T}from"./DateUtil.23249470.js";/* empty css              */import{T as r}from"./TextField.5f6e7eb3.js";import"./ExitToAppSharp.02498b4d.js";import"./jsx-runtime_commonjs-proxy.683ef609.js";import"./Modal.3a8b8f7e.js";import"./Box.04ee3f33.js";import"./Grow.67318f79.js";import"./Close.fd9a01c4.js";import"./Toolbar.a09df885.js";import"./Select.c1216a27.js";import"./Menu.df74857a.js";import"./MenuItem.06d228b4.js";function ee(p){const l=p.columns,[d,x]=t.exports.useState(10),[m,f]=t.exports.useState(0),[h,b]=t.exports.useState([]);t.exports.useEffect(()=>{p.data!=null&&b(p.data)},[]);const g=(a,o)=>{f(o)},P=a=>{x(+a.target.value),f(0)};return n(U,{sx:{width:"100%",overflow:"hidden"},children:[e(G,{sx:{maxHeight:440},children:n(V,{stickyHeader:!0,"aria-label":"sticky table",children:[e(J,{children:n(k,{children:[l.map(a=>e(C,{align:a.align,style:{minWidth:a.minWidth},children:a.label},a.id)),e(C,{})]})}),e(K,{children:h.slice(m*d,m*d+d).map(a=>e(Y.Fragment,{children:e(k,{hover:!0,role:"checkbox",tabIndex:-1,children:l.map(o=>{const c=a[o.id];return e(C,{align:o.align,children:o.format&&typeof c=="number"?o.format(c):c},o.id)})},a.id)},a.id))})]})}),e(X,{rowsPerPageOptions:[10,25,100],component:"div",count:h.length,rowsPerPage:d,page:m,onPageChange:g,onRowsPerPageChange:P})]})}function ve(p){let{token:l}=$();const[d,x]=t.exports.useState([]),[m,f]=t.exports.useState(""),[h,b]=t.exports.useState(""),[g,P]=t.exports.useState(""),[a,o]=t.exports.useState(""),[c,D]=t.exports.useState(""),[w,L]=t.exports.useState(""),[M,E]=t.exports.useState(""),[v,A]=t.exports.useState(""),[B,S]=t.exports.useState(!1),[I,R]=t.exports.useState(""),[N,O]=t.exports.useState(""),[W,y]=t.exports.useState(!1);function _(u,i){return new Promise((s,te)=>{R(u),O(i),y(!0),s("Dados Atualizados")})}const H=()=>{S(!1)};t.exports.useEffect(()=>{q(()=>import("./Api.5a83ade6.js"),[]).then(u=>{u.getRequest(`cams/camaccesspermission/${l}`,localStorage.getItem("petdiniz-token")).then(i=>{const{data:s}=i;s!=null&&(f(s.alias),b(Z(s.durationpermitions)),P(T(s.startpermissiondate)),o(T(s.stoppermissiondate)),D(s.userid),L(s.username),E(s.createbyusername))}).then(()=>{c==0&&A(`${window.location.origin}/onlyviewcams/${l}`)}),u.getRequest(`onlyaccesscam/${l}`,localStorage.getItem("petdiniz-token")).then(i=>{console.log(i),i.data.data!=null&&x(i.data.data)})})},[]);const j=u=>{navigator.clipboard.writeText(v).then(()=>{_("success","Link copiado com sucesso!").then(()=>{}).finally(()=>{setTimeout(()=>{y(!1)},3e3)})})},z=[{id:"alias",label:"Cameras:",width:100}];return n("div",{className:"tableListItemArea",children:[n("div",{className:"accessInfo",children:[e(r,{id:"alias",autoComplete:"off",disabled:!0,style:{maxWidth:600},value:m,label:"Nome Refer\xEAncia:",variant:"outlined"}),e(r,{id:"client",autoComplete:"off",disabled:!0,style:{maxWidth:600},value:w,label:"Usuario:",variant:"outlined"}),e(r,{id:"operator",autoComplete:"off",disabled:!0,style:{maxWidth:600},value:M,label:"Autorizado por:",variant:"outlined"}),e(r,{id:"startPermissionDate",autoComplete:"off",disabled:!0,style:{maxWidth:600},value:g,label:"Inicio Permiss\xE3o:",variant:"outlined"}),e(r,{id:"stopPermissionDate",autoComplete:"off",disabled:!0,style:{maxWidth:600},value:a,label:"Fim Permiss\xE3o:",variant:"outlined"}),e(r,{id:"durationaccesspermission",autoComplete:"off",disabled:!0,style:{maxWidth:600},value:h,label:"Dura\xE7\xE3o da Permiss\xE3o:",variant:"outlined"})]}),n("div",{className:"onlyLinkArea",style:{display:c==0?"flex":"none"},children:[e(r,{id:"onlyLink",autoComplete:"off",value:v,label:"Link de Libera\xE7\xE3o:",variant:"outlined"}),n("div",{className:"linkAreaTextBtnArea",children:[e("button",{onClick:j,children:"Copiar!"}),e("button",{onClick:()=>S(!0),children:"Gerar QrCode"})]})]}),e("div",{className:"tableListCams",children:e(ee,{columns:z,data:d})}),e(Q,{open:W,typeMessage:I,mensage:N}),e(F,{openModalQrCode:B,qrCodeText:v,handleCloseModal:H})]})}export{ve as default};
